---
name: dbt-docs
description: Generate and serve dbt documentation. Use when creating project documentation or updating model descriptions.
---

# dbt Docs Skill

## Purpose

Generate comprehensive dbt documentation and serve it locally for review, ensuring all models, sources, and columns are properly documented.

## Inputs

- **Action**: Generate docs, serve docs, or update documentation
- **Scope**: All models or specific selection
- **Output format**: Local server or static HTML

## Steps

1. **Review Documentation Status**
   - Check existing schema.yml files
   - Identify undocumented models and columns
   - Review current documentation coverage

2. **Update Documentation**
   - Add model descriptions to schema.yml files
   - Document all column descriptions
   - Add source documentation
   - Include test descriptions

3. **Generate Documentation**
   - Run `dbt docs generate` to create docs
   - Review manifest.json and catalog.json
   - Check for warnings or missing docs

4. **Serve Documentation**
   - Run `dbt docs serve` to launch local server
   - Open browser to view documentation
   - Navigate DAG and verify lineage

5. **Deploy Documentation** (Optional)
   - Upload docs to S3, GCS, or hosting platform
   - Share documentation URL with team
   - Set up automated doc deployment

## Output

- Generated documentation files (manifest.json, catalog.json)
- Local documentation server
- Updated schema.yml files with descriptions
- Documentation coverage report

## Documentation Templates

### Model Documentation
```yaml
version: 2

models:
  - name: fct_orders
    description: |
      **Fact table containing all order transactions.**

      This model captures every order placed in the system, including:
      - Order identifiers and timestamps
      - Customer information
      - Order totals and line item counts
      - Order status and fulfillment details

      **Grain**: One row per order

      **Refresh**: Incrementally updated hourly

      **Data Quality**:
      - Uniqueness enforced on order_id
      - Referential integrity to dim_customers
      - Elementary volume anomaly detection enabled

    columns:
      - name: order_id
        description: |
          Primary key. Unique identifier for each order,
          generated by the source system.

      - name: customer_id
        description: |
          Foreign key to dim_customers. Links order to
          customer dimension for customer attributes.

      - name: order_date
        description: Date when the order was placed (UTC)

      - name: order_total
        description: |
          Total order amount in USD, including:
          - Subtotal of all line items
          - Shipping costs
          - Taxes
          Does not include discounts or credits.
```

### Source Documentation
```yaml
version: 2

sources:
  - name: salesforce
    description: |
      Salesforce production database replica.
      Refreshed every 15 minutes via Fivetran.

    database: raw
    schema: salesforce

    freshness:
      warn_after: {count: 30, period: minute}
      error_after: {count: 60, period: minute}

    tables:
      - name: account
        description: Salesforce Account object
        columns:
          - name: id
            description: Salesforce Account ID
            tests:
              - unique
              - not_null

          - name: name
            description: Account name

          - name: created_date
            description: Account creation timestamp
```

### Macro Documentation
```yaml
version: 2

macros:
  - name: cents_to_dollars
    description: |
      Converts currency amounts from cents to dollars.

      **Usage:**
      ```sql
      {{ cents_to_dollars('amount_cents') }}
      ```

      **Parameters:**
      - column_name: Name of column containing cents

      **Returns:** Decimal value in dollars (cents / 100)

    arguments:
      - name: column_name
        type: string
        description: Column name to convert
```

## Documentation Best Practices

### Model Descriptions
- Start with a clear one-line summary
- Explain the business purpose
- State the grain (one row per...)
- Document refresh cadence
- Note any data quality measures
- Link to related resources

### Column Descriptions
- Describe what the column contains
- Specify units (USD, UTC, etc.)
- Note any transformations applied
- Explain calculation logic for derived columns
- Document any known data quality issues

### Use Markdown
- Format with headers, lists, bold/italic
- Add code blocks for examples
- Include links to external docs
- Use tables for complex relationships

## Commands

### Generate Documentation
```bash
# Generate for entire project
dbt docs generate

# Generate for specific models
dbt docs generate --select fct_orders+

# Include sources in catalog
dbt docs generate --no-compile
```

### Serve Documentation
```bash
# Default (opens browser on port 8080)
dbt docs serve

# Custom port
dbt docs serve --port 8001

# Don't open browser
dbt docs serve --no-browser
```

## Documentation Deployment

### AWS S3
```bash
# Upload docs to S3
aws s3 sync target/ s3://my-bucket/dbt-docs/ \
  --exclude "*" \
  --include "manifest.json" \
  --include "catalog.json" \
  --include "index.html"
```

### GitHub Pages
```yaml
# .github/workflows/docs.yml
name: Deploy dbt docs
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: dbt deps
      - run: dbt docs generate
      - uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./target
```

## Progressive Disclosure

- `references/doc-style-guide.md` - Documentation writing standards
- `references/deployment-options.md` - Hosting and deployment strategies
- `scripts/check-doc-coverage.sh` - Coverage analysis script
- `assets/templates/` - Documentation templates by model type

## Example Usage

- `/dbt-docs generate and serve documentation`
- `/dbt-docs update descriptions for all mart models`
- `/dbt-docs check documentation coverage`
- `/dbt-docs deploy to S3`
